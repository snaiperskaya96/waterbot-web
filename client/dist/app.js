"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var i,c=arguments.length,a=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(a=(c<3?i(a):c>3?i(t,r,a):i(t,r))||a);return c>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),router_1=require("@angular/router"),core_2=require("angular2-cookie/core"),user_service_1=require("./login/services/user-service"),App=function(){function e(e,t,r){var o=this;this.router=e,this.cookie=t,this.userService=r;var i=this.cookie.getObject("u");this.loggedIn=!!i&&i.a,this.authenticationCheck(),this.userService.observeAuthentication(function(e){o.loggedIn=e})}return e.prototype.authenticationCheck=function(){var e=this,t=this.cookie.get("wb_token");t?this.userService.verify(t).subscribe(function(t){e.loggedIn=t,e.cookie.putObject("u",{a:t}),t||e.router.navigateByUrl("/")}):(this.loggedIn=!1,this.cookie.putObject("u",{a:!1}),this.router.navigateByUrl("/"))},e=__decorate([core_1.Component({selector:"app",templateUrl:"app.html",providers:[core_2.CookieService,user_service_1.UserService]}),__metadata("design:paramtypes",[router_1.Router,core_2.CookieService,user_service_1.UserService])],e)}();exports.App=App;